<script lang="ts">
	import type { Gradio } from "@gradio/utils";
	import type { FileData } from "@gradio/upload";
	import UploadButton from "./shared/UploadButton.svelte";

	export let elem_id = "";
	export let elem_classes: string[] = [];
	export let visible = true;
	export let label: string;
	export let value: null | FileData | FileData[];
	export let file_count: string;
	export let file_types: string[] = [];
	export let root: string;
	export let size: "sm" | "lg" = "lg";
	export let scale: number | null = null;
	export let min_width: number | undefined = undefined;
	export let variant: "primary" | "secondary" | "stop" = "secondary";
	export let gradio: Gradio<{
		change: FileData | FileData[] | null;
		upload: FileData | FileData[] | null;
		click: never;
	}>;
	export let mode: "static" | "interactive";

	$: disabled = mode === "static";
</script>

<UploadButton
	{elem_id}
	{elem_classes}
	{visible}
	{file_count}
	{file_types}
	{size}
	{scale}
	{min_width}
	{root}
	{value}
	{disabled}
	{variant}
	{label}
	on:click={() => gradio.dispatch("click")}
	on:change={({ detail }) => {
		value = detail;
		gradio.dispatch("change", detail);
	}}
	on:upload={({ detail }) => {
		value = detail;
		gradio.dispatch("upload", detail);
	}}
>
	{gradio.i18n(label)}
</UploadButton>
